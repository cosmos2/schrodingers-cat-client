# ( ⓛ ω ⓛ \*) meooooooow

오늘할일 ( 8 월 14 일 화요일)

1. 고양이 고르는 창 만들기
2. 서버와 연결해서 테스트해보기
3. react-navigation 공부

오늘의 마무리

1. 위쪽에 구역 정보같은게 나오면 좋겠으나 구현가능할지는 모름. <Cat/> 컴포넌트를 따로 만들어서 안에서 부모 컴포넌트로 고양이 아이디를 올리는데 처음에 안들어가서 헤맸음. Cat 에서 state 에 담은 후에 넘기면 들어갔음.
2. 서버와 연결해서 테스트는 못했음.
3. 딴거 하느라 아직 못봤음.

# ( ⓛ ω ⓛ \*) meooooooow

오늘할일 ( 8 월 16 일 목요일)

1. 타이머 마무리
2. 클라이언트 모두 merge 하기
3. 시작시 socket.io jwt 로 토큰 확인하기

오늘의 마무리

1. 타이머를 setTimeout 으로 돌리면 오차가 많이 생겨서 컴포넌트를 두개로 나눠서 receiveProps 를 사용해서 구현했다. 오차를 잡음.

2. 유저 정보 받아오기

a. 처음에 앱을 시동했을 때 서버에서 유저정보를 받아와서 로컬 스토리지에 저장하려했으나, 이경우에는 채팅을 한 뒤에는 새로운 정보가 업데이트되지 않는다.
b. 그렇다면 채팅이 끝난 뒤에도 서버에서 유저 정보를 보내주면 업데이트된 정보를 얻을 수 있다. 하지만 이 경우에는 두번이나 요청을 보내야하기 때문에 효율적이지 못하다.
c. 따라서 유저정보가 필요한 순간, 프로필을 열람하는 순간에만 post 요청을 보내서 유저정보를 받는 것이 가장 최신 정보를 효율적으로 받을 수 있는 방법이라는 결론에 다다름.

3. 소켓을 여는 시점

a. 앱을 처음 구동했을때 첫페이지에서 소켓을 열어서 토큰을 보내는 방식이었다.
b. 그러나 고양이 선택 페이지에서는 소켓이 열리지 않음 그리고 첫번째부터 오픈 박스 페이지까지 소켓을 이동시켜야하는데 props 로 넘기는게 번거로움
c. 소켓이 필요한 순간은 채팅방이 열리는 순간이므로 오픈 박스 페이지에서 소켓을 열어 토큰과 위치정보를 보내고 채팅방 입장까지 전달하는 편이 가장 효율적인 것 같다.
d. 나머지 자잘한 정보들은 http 리퀘스트로 요청하는 편이 낫다. 계속 연결되어 있을 필요가 없음.
e. 그런데 context API 라는게 있다는걸 알게됨. 이걸 쓰면 전역으로 소켓을 빼놓을 수 있을 듯.
